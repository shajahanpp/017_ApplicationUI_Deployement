"use strict";(self.webpackChunkust_web=self.webpackChunkust_web||[]).push([[891],{45742:function(e,n,t){t.r(n),t.d(n,{LoginPage:function(){return $}});var a=t(74165),r=t(15861),i=t(29439),o=t(47313),s=t(65964),c=t(2135),l=t(58467),u=t(56352),d=t(83038),m=t(32799),f=t(66100),p=t(91486),g=t(35381),h=t(1413),v=t(64276),x=t(36849),w=t(9795),y="".concat((0,w.W)(),"/login"),S={login:function(e){return x.be.post(y,e)}},b=t(49933),j=t(61742),N=(0,a.Z)().mark(k),Z=(0,a.Z)().mark(P);function k(e){var n,t,r;return(0,a.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,(n=new FormData).append("userName",e.payload.userName||""),n.append("password",e.payload.password||""),a.next=6,(0,v.RE)(S.login,n);case 6:return t=a.sent,a.next=9,(0,v.gz)(C.loginSuccess((0,h.Z)((0,h.Z)({},t.data.data[0]),{},{authToken:t.headers["auth-token"]})));case 9:a.next=17;break;case 11:return a.prev=11,a.t0=a.catch(0),a.next=15,(0,v.gz)(C.loginError());case 15:r=(0,j.Ev)(a.t0),b.a.error(r);case 17:case"end":return a.stop()}}),N,null,[[0,11]])}function P(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.Fm)(C.doPasswordLogin.type,k);case 2:case"end":return e.stop()}}),Z)}var B={loginAPILoading:!1,loginSuccessResponse:void 0},L=(0,p.o)({name:"login",initialState:B,reducers:{doPasswordLogin:function(e,n){e.loginAPILoading=!0,e.loginSuccessResponse=void 0},loginSuccess:function(e,n){e.loginAPILoading=!1,e.loginSuccessResponse=n.payload},loginError:function(e){e.loginAPILoading=!1},clearLoginSuccessResponse:function(e){e.loginSuccessResponse=void 0}}}),C=L.actions,T=function(){return(0,g.v)({key:L.name,reducer:L.reducer}),(0,g.h)({key:L.name,saga:P}),{actions:L.actions}},D=t(76747),R=(0,D.P1)([function(e){return e.login||B}],(function(e){return e})),z=(0,D.P1)([R],(function(e){return e.loginAPILoading})),I=(0,D.P1)([R],(function(e){return e.loginSuccessResponse})),E=((0,D.P1)([R],(function(e){var n;return null===(n=e.loginSuccessResponse)||void 0===n?void 0:n.authToken})),t.p+"static/media/login-bg.4947759900d0975ddb0d.png"),F=t(36386),q=t(11950),H=t(69973),V=t(7410),A=t(2043),_=t(5370),M=t(58205),U=t(27081),W=t(37009),J=t(46417),K=function(){switch((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase()){case"text":case"password":case"number":case"time":default:return _.Z;case"datepicker":return M.a;case"list":return A.Z;case"file":return U.Z;case"textarea":return W.Z}},G=t(52966),O=function(e){var n=e.formSaveButtonDisabled,t=e.formSaveButtonClassName,a=void 0===t?"btn-primary-dark btn-primary-dark--sm mt-3":t,r=e.formSaveButtonType,i=e.currentData,o=e.validationSchema,s=e.formBody,c=e.loading,l=void 0!==c&&c,u=e.passProps,d=void 0!==u&&u,m=e.handleSubmit,p=e.submitSetTouched,g=void 0!==p&&p,v=e.formBtnTitle,x=e.style,w=e.formClassName,y=e.formBtnIcon,S={};return o&&(S.validationSchema=o),(0,J.jsx)("div",{children:(0,J.jsx)(V.J9,(0,h.Z)((0,h.Z)({initialValues:i,enableReinitialize:!0},S),{},{children:function(e){var t=e.values,i=e.validateForm,o=e.setTouched;return(0,J.jsx)(V.l0,{style:x,className:w,children:(0,J.jsxs)("div",{style:{maxHeight:"100%"},children:[(0,J.jsxs)(J.Fragment,{children:[d&&s((0,h.Z)({},e)),!d&&s]}),(0,J.jsx)(f.z,{title:v,className:a,disabled:n||l,type:r,icon:y,onClick:function(e){e.preventDefault(),i().then((function(e){(0,G.xbD)(e)?m&&m(t):g&&o((0,V.E9)(e,!0))}))}})]})})}}))})},Q={className:"w-100 my-2"},X=function(){return H.Vo((function(e){return H.Ry().shape((0,h.Z)({userName:H.Z_().required("Email is required"),password:H.Z_().required("Password is required")},{}))}))},Y=function(e){var n=e.addUpdateDeleteLoading,t=e.handleSubmit,a=e.currentData,r=e.formClassName,i=e.formSaveButtonClassName,o=e.formBtnIcon,s=e.formBtnTitle,c=e.btnDisabled;return(0,J.jsx)(O,{currentData:a,loading:n||!1,passProps:!0,handleSubmit:t,validationSchema:X,submitSetTouched:!0,formBody:function(){return[(0,h.Z)((0,h.Z)({},Q),{},{name:"userName",label:"Email",type:"text",placeholder:"Please enter your email",required:!0}),(0,h.Z)((0,h.Z)({},Q),{},{name:"password",label:"Password",type:"password",placeholder:"Please enter your password",required:!0})].map((function(e){return function(e){if(e){var n={};return e.validationSchema&&(n.validate=e.validationSchema),(0,J.jsx)(V.gN,(0,h.Z)({isFieldType:!e.notFieldType,name:e.name,fieldDetails:e,component:K(e.type),width:e.width-10||e.width||"inherit"},n),e.name)}}(e)}))},formSaveButtonType:"submit",formClassName:r,formSaveButtonClassName:i,formBtnIcon:o,formBtnTitle:s,formSaveButtonDisabled:c})};function $(){var e,n,t=T().actions,p=(0,u.I0)(),g=(0,c.lr)(),h=(0,i.Z)(g,2)[1],v=(0,u.v9)(F.i4),x=(0,u.v9)(I),w=(0,u.v9)(z),y=(0,l.s0)(),S=(0,l.TH)(),j=(0,d.aC)(),N=(null===(e=S.state)||void 0===e||null===(n=e.from)||void 0===n?void 0:n.pathname)||"/";if(o.useEffect((function(){x&&j.signin(x,(function(){p(t.clearLoginSuccessResponse()),y(N,{replace:!0})}))}),[x,j,y,N,t,p]),j.loginResponse)return(0,J.jsx)(l.Fg,{to:"/app"});var Z=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(t.doPasswordLogin(n));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)(s.ql,{children:[(0,J.jsx)("title",{children:"Login"}),(0,J.jsx)("meta",{name:"description",content:"".concat((0,q.i)(v,"shortToolName")," Login")})]}),(0,J.jsxs)("div",{className:"d-flex overflow-auto",style:{maxHeight:"100vh"},children:[(0,J.jsx)("div",{className:"custom-login-form-container d-flex align-items-center justify-content-center",children:(0,J.jsxs)("div",{style:{maxWidth:415},className:"p-5 w-100",children:[(0,J.jsx)("div",{style:{width:77,height:85},children:(0,J.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 77 85",children:(0,J.jsx)("path",{fill:"#000",d:"M14.668 51.603c4.93 0 9.85 2.09 12.111 5.873l-5.351 4.33c-1.821-1.642-4.041-2.84-6.805-2.84-2.984 0-4.439 1.218-4.439 2.353 0 1.505 1.392 2.383 4.44 3.135l2.732.664c7.709 1.859 10.542 5.43 10.542 9.898 0 5.885-5.254 9.984-14.037 9.984C8.947 85 2.888 82.94.55 78.704l5.354-4.329c2.167 2.198 4.62 3.525 7.91 3.525 2.85 0 5.112-.951 5.112-2.66 0-1.372-1.033-1.9-3.856-2.608l-2.867-.708C4.54 70.022 1.574 65.7 1.574 61.542c0-5.383 4.76-9.94 13.094-9.94zm62.266.918v7.495h-9.383v23.981h-8.67V60.016H49.5V52.52h27.435zM8.634 0v18.655c0 3.716 2.12 5.832 5.571 5.832 3.45 0 5.528-2.116 5.528-5.832V0h8.632v18.614c0 8.653-5.18 13.865-14.116 13.865C4.96 32.48 0 27.046 0 18.614V0h8.634zm60.695 9.33v12.226H57.104V9.331H69.33z"})})}),(0,J.jsx)("div",{style:{marginTop:30,fontSize:16},children:"Sign in to application"}),(0,J.jsxs)("div",{className:"custom-login-form",children:[(0,J.jsx)(Y,{addUpdateDeleteLoading:!1,currentData:{},handleSubmit:Z,formClassName:"my-4",formSaveButtonClassName:"btn-primary-dark w-100 mt-2",formBtnIcon:!0,formBtnTitle:"Login",btnDisabled:w}),(0,J.jsx)(f.z,{title:"Login with Keycloak",className:"btn-primary-dark w-100",style:{marginTop:"-1.5rem"},disabled:w,icon:!0,onClick:function(e){e.preventDefault(),h({keycloak:"true"});try{m.tP.login(m.HS)}catch(n){b.a.error("Something went wrong")}}})]}),(0,J.jsx)("div",{className:"d-flex justify-content-center mt-4 mb-2",style:{fontSize:14},children:(0,q.i)(v,"toolName")})]})}),(0,J.jsx)("div",{className:"custom-login-image-container flex-grow-1",children:(0,J.jsx)("img",{src:E,alt:"",className:"h-100 w-100"})})]})]})}}}]);