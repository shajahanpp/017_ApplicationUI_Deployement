"use strict";(self.webpackChunkust_web=self.webpackChunkust_web||[]).push([[82],{86434:function(e,n,t){t.d(n,{o:function(){return L}});var a=t(1413),r=t(47313),i=t(7410),o=t(2043),s=t(5370),l=t(58205),c=t(27081),d=t(37009),u=t(16031),p=t(10383),f=t(87668),m=t(64287),v=t(64558),h=t(41769),g=t(46417),y={containerStyle:{},containerClassName:"",label:"",labelStyle:{},labelClassName:"",disabled:!1};function x(e){var n=e.field,t=e.form,i=e.fieldDetails,o=void 0===i?{}:i,s=e.isFieldType,l=void 0!==s&&s,c=t||{},d=c.touched,x=c.errors,b=o.name,w=o.label,j=o.className,Z=o.options,I=void 0===Z?[]:Z,S=r.useMemo((function(){return(0,a.Z)((0,a.Z)({},y),o)}),[o]),A=l&&(0,u.get)(d,n.name)&&(0,u.get)(x,n.name)||!1,k=l?n.name:S.id||S.name,C=l?n.value:S.value;C=C||!1;var N="position-relative";S.containerClassName&&(N+=" ".concat(S.containerClassName));return(0,g.jsxs)("div",{style:(0,a.Z)({},S.containerStyle),className:N,children:[I.length||S.optionsType?(0,g.jsxs)(p.Z,{component:"fieldset",children:[(0,g.jsx)(f.Z,{component:"legend",children:w}),(0,g.jsx)(m.Z,{"aria-label":"position",children:I.map((function(e,n){return(0,g.jsx)(v.Z,{control:(0,g.jsx)(h.Z,{checked:!!(C||[]).includes(e.value),onChange:function(n){!function(e,n){var a=e.target.checked,r=C||[];if(a)r.push(n.value);else{var i=C.indexOf(n.value);-1!==i&&r.splice(i,1)}if(l){var o=t.setFieldValue;o(S.name,r),S.changeCb&&S.changeCb(o,r)}else S.onChange&&S.onChange(r)}(n,e)}}),label:e.label},n)}))})]}):(0,g.jsx)(v.Z,{id:k,name:b,control:(0,g.jsx)(h.Z,{onChange:function(e){var n=e.target.checked;if(l){var a=t.setFieldValue;a(S.name,n),S.changeCb&&S.changeCb(a,n)}else S.onChange&&S.onChange(n)},checked:C||!1}),label:w,className:j||""}),A&&(0,g.jsx)("div",{className:"custom-error-text",children:(0,u.get)(x,n.name)})]})}var b=t(42379),w=t(88765),j=t(7481),Z=(0,b.ZP)("span")((function(e){var n=e.theme;return{borderRadius:"50%",width:16,height:16,boxShadow:"dark"===n.palette.mode?"0 0 0 1px rgb(16 22 26 / 40%)":"inset 0 0 0 1px rgba(16,22,26,.2), inset 0 -1px 0 rgba(16,22,26,.1)",backgroundColor:"dark"===n.palette.mode?"#394b59":"#f5f8fa",backgroundImage:"dark"===n.palette.mode?"linear-gradient(180deg,hsla(0,0%,100%,.05),hsla(0,0%,100%,0))":"linear-gradient(180deg,hsla(0,0%,100%,.8),hsla(0,0%,100%,0))",".Mui-focusVisible &":{outline:"2px auto rgba(19,124,189,.6)",outlineOffset:2},"input:hover ~ &":{backgroundColor:"dark"===n.palette.mode?"#30404d":"#ebf1f5"},"input:disabled ~ &":{boxShadow:"none",background:"dark"===n.palette.mode?"rgba(57,75,89,.5)":"rgba(206,217,224,.5)"}}})),I=(0,b.ZP)(Z)({backgroundColor:"#006E74",backgroundImage:"linear-gradient(180deg,hsla(0,0%,100%,.1),hsla(0,0%,100%,0))","&:before":{display:"block",width:16,height:16,backgroundImage:"radial-gradient(#fff,#fff 28%,transparent 32%)",content:'""'},"input:hover ~ &":{backgroundColor:"#006E74"}});function S(e){return(0,g.jsx)(w.Z,(0,a.Z)({disableRipple:!0,color:"default",checkedIcon:(0,g.jsx)(I,{}),icon:(0,g.jsx)(Z,{})},e))}var A=(0,b.ZP)(j.Z)({"MuiFormGroup-root":{flexWrap:"nowrap"}}),k={containerStyle:{},containerClassName:"",disabled:!1,options:[]};function C(e){var n=e.field,t=e.form,i=e.fieldDetails,o=void 0===i?{}:i,s=e.isFieldType,l=void 0!==s&&s,c=t||{},d=c.touched,m=c.errors,h=o.name,y=o.label,x=o.disabled,b=o.options,w=r.useMemo((function(){return(0,a.Z)((0,a.Z)({},k),o)}),[o]),j=l&&(0,u.get)(d,n.name)&&(0,u.get)(m,n.name)||!1,Z=l?n.name:w.id||w.name,I=l?n.value:w.value;I=I||!1;var C="position-relative";w.containerClassName&&(C+=" ".concat(w.containerClassName));return(0,g.jsxs)("div",{style:(0,a.Z)({},w.containerStyle),className:C,children:[(0,g.jsxs)(p.Z,{disabled:x,id:Z,children:[(0,g.jsx)(f.Z,{children:y}),(0,g.jsx)(A,{defaultValue:null!==b&&void 0!==b&&b.length?b[0].value:void 0,"aria-labelledby":"demo-customized-radios",name:h,value:I,onChange:function(e){var n=e.target.value;if(l){var a=t.setFieldValue;a(w.name,n),w.changeCb&&w.changeCb(a,n)}else w.onChange&&w.onChange(n)},row:!0,style:{minWidth:"fit-content"},className:"px-2",children:(b||[]).map((function(e,n){return(0,g.jsx)(v.Z,{value:e.value||e.id,control:(0,g.jsx)(S,{}),label:null===e||void 0===e?void 0:e.label,style:{minWidth:"fit-content"}},n)}))})]}),j&&(0,g.jsx)("div",{className:"custom-error-text",children:(0,u.get)(m,n.name)})]})}var N=function(){switch((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase()){case"text":case"password":case"number":case"time":default:return s.Z;case"datepicker":return l.a;case"list":return o.Z;case"file":return c.Z;case"textarea":return d.Z;case"boolen-input":return x;case"radio-button":return C}},L=function(e){if(e){var n={};return e.validationSchema&&(n.validate=e.validationSchema),(0,g.jsx)(i.gN,(0,a.Z)({isFieldType:!e.notFieldType,name:e.name,fieldDetails:e,component:N(e.type),width:e.width-10||e.width||"inherit"},n),e.name)}}},34622:function(e,n,t){t.r(n),t.d(n,{TestStrategy:function(){return Me}});var a=t(93433),r=t(29439),i=t(53115),o=t(47313),s=t(56352),l=t(58467),c=t(66100),d=t(1413),u=t(4942),p=t(16157),f=t(2074),m=t(95895),v=t(98368),h=t(68728),g=t(42379),y=t(62585),x=t(677),b=t(46417),w=(0,g.ZP)(y.Z)((function(e){var n,t=e.theme;return n={},(0,u.Z)(n,"&.".concat(x.Z.alternativeLabel),{top:10,left:"calc(-50% + 16px)",right:"calc(50% + 16px)"}),(0,u.Z)(n,"&.".concat(x.Z.active),(0,u.Z)({},"& .".concat(x.Z.line),{borderColor:"#006e74"})),(0,u.Z)(n,"&.".concat(x.Z.completed),(0,u.Z)({},"& .".concat(x.Z.line),{borderColor:"#006e74"})),(0,u.Z)(n,"& .".concat(x.Z.line),{borderColor:"dark"===t.palette.mode?t.palette.grey[800]:"#eaeaf0",borderTopWidth:3,borderRadius:1}),n})),j=(0,g.ZP)("div")((function(e){var n=e.theme,t=e.ownerState;return(0,d.Z)((0,d.Z)({color:"dark"===n.palette.mode?n.palette.grey[700]:"#eaeaf0",display:"flex",height:22,alignItems:"center"},t.active&&{color:"#006e74"}),{},{"& .QontoStepIcon-completedIcon":{color:"#006e74",zIndex:1,fontSize:18},"& .QontoStepIcon-circle":{width:8,height:8,borderRadius:"50%",backgroundColor:"currentColor"}})}));function Z(e){var n=e.active,t=e.completed,a=e.className;return(0,b.jsx)(j,{ownerState:{active:n},className:a,children:t?(0,b.jsx)(h.Z,{className:"QontoStepIcon-completedIcon"}):(0,b.jsx)("div",{className:"QontoStepIcon-circle"})})}function I(e){var n=e.steps,t=e.activeStep;return(0,b.jsx)(p.Z,{sx:{width:"100%"},children:(0,b.jsx)(f.Z,{alternativeLabel:!0,connector:(0,b.jsx)(w,{}),activeStep:t,children:n.map((function(e,n){return(0,b.jsx)(m.Z,(0,d.Z)((0,d.Z)({},{}),{},{children:(0,b.jsx)(v.Z,(0,d.Z)((0,d.Z)({StepIconComponent:Z},{}),{},{children:e.name}))}),e.id)}))})})}var S,A=t(83069),k=t(2419),C=t(80699),N=t(21094),L=[{id:1,label:"New Test Strategy",value:"NewTestStrategy"},{id:2,label:"Resuming from Prior Transaction",value:"ResumingFromPriorTransaction"}],P=function(e){var n=e.viewId,t=e.setViewId,a=e.currentProject,r=e.portfolioId,i=e.onPortfolioIdChange,s=e.runId,l=e.onProjectChange,c=e.onChange,d=o.useMemo((function(){var e={};return r&&(e.portfolioId=r),e}),[r]),u=o.useMemo((function(){return{projectId:null===a||void 0===a?void 0:a.projectId,runProcessTypeIds:[6]}}),[a]);return(0,b.jsx)("div",{className:"d-flex justify-content-center align-items-center w-100 h-100 px-5 py-2",children:(0,b.jsxs)("div",{className:"d-flex flex-column w-100 h-100",children:[(0,b.jsx)(C.Z,{classes:"w-100 me-3 my-3",title:"Portfolio Name",onChange:i,value:r,optionLabel:"portfolioName",optionValue:"portfolioId",isClearable:!0,urlType:"portfolio"}),(0,b.jsx)(C.Z,{classes:"w-100 me-3 my-3",title:"Project Name",onChange:l,value:null===a||void 0===a?void 0:a.projectId,optionLabel:"projectName",optionValue:"projectId",urlType:"project",postBody:d}),(0,b.jsx)("div",{className:"my-3",children:(0,b.jsx)(N.Z,{disable:!(null!==a&&void 0!==a&&a.projectId)||!1,value:n,setValue:function(e){t(+e)},options:L})}),2===n&&(null===a||void 0===a?void 0:a.projectId)&&(0,b.jsx)(C.Z,{classes:"w-100 me-3",title:"Previous Session",onChange:c,value:s,optionLabel:"runId",optionValue:"runId",urlType:"project/previous/runs",method:"POST",postBody:u})]})})},T=["title","titleId"];function F(){return F=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},F.apply(this,arguments)}function E(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}function D(e,n){var t=e.title,a=e.titleId,r=E(e,T);return o.createElement("svg",F({width:8,height:8,viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":a},r),t?o.createElement("title",{id:a},t):null,S||(S=o.createElement("path",{d:"M8 0.805714L7.19429 0L4 3.19429L0.805714 0L0 0.805714L3.19429 4L0 7.19429L0.805714 8L4 4.80571L7.19429 8L8 7.19429L4.80571 4L8 0.805714Z",fill:"white"})))}var O,M=o.forwardRef(D),Q=(t.p,["title","titleId"]);function z(){return z=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},z.apply(this,arguments)}function R(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}function V(e,n){var t=e.title,a=e.titleId,r=R(e,Q);return o.createElement("svg",z({xmlns:"http://www.w3.org/2000/svg",width:"268.000000pt",height:"330.000000pt",viewBox:"0 0 268.000000 330.000000",preserveAspectRatio:"xMidYMid meet",ref:n,"aria-labelledby":a},r),t?o.createElement("title",{id:a},t):null,O||(O=o.createElement("g",{transform:"translate(0.000000,330.000000) scale(0.100000,-0.100000)",fill:"#006e74",stroke:"none"},o.createElement("path",{d:"M0 1650 l0 -1650 1340 0 1340 0 0 1153 0 1153 -504 497 -504 497 -836 0 -836 0 0 -1650z m1560 1015 l0 -465 475 0 475 0 0 -1015 0 -1015 -1170 0 -1170 0 0 1480 0 1480 695 0 695 0 0 -465z m810 -297 c0 -5 -146 -8 -325 -8 l-325 0 0 332 0 333 325 -325 c179 -179 325 -328 325 -332z"}),o.createElement("path",{fill:"black",d:"M460 745 l0 -285 285 0 285 0 0 285 0 285 -285 0 -285 0 0 -285z"}))))}var U=o.forwardRef(V),q=(t.p,function(e){var n=e.files,t=e.handleFilesChange,a=e.handleClearFile;return e.uploadLoading?(0,b.jsx)("div",{className:"d-flex align-items-center justify-content-center h-100 w-100 px-5 py-2",children:"Uploading Files..."}):(0,b.jsxs)("div",{className:"h-100 w-100 px-5 py-2 d-flex justify-content-center align-items-center flex-wrap",children:[(0,b.jsx)("label",{className:"my-3 d-flex mx-2 justify-content-center align-items-center",htmlFor:"file-input",children:(0,b.jsxs)("div",{style:{color:"#006e74",width:"10rem",minHeight:"10rem"},className:"border shadow p-3 cursor-pointer d-flex flex-column justify-content-between align-items-center",children:[(0,b.jsx)("div",{className:"d-flex flex-column justify-content-center h-100 ",children:(0,b.jsx)("h1",{className:"display-1 ",children:"+"})}),(0,b.jsx)("div",{children:"Upload Files"})]})}),(0,b.jsx)("input",{className:"d-none",id:"file-input",style:{cursor:"pointer"},type:"file",onChange:t,multiple:!0}),(n||[]).map((function(e,n){return(0,b.jsx)("div",{className:"d-flex my-3 mx-2 justify-content-center",children:(0,b.jsxs)("div",{style:{color:"#006e74",width:"10rem",minHeight:"10rem"},className:"border position-relative shadow p-3 d-flex flex-column justify-content-between align-items-center",children:[(0,b.jsx)("div",{className:"position-absolute",style:{top:-22,right:-22,padding:10},children:(0,b.jsx)(c.z,{icon:!1,title:(0,b.jsx)(M,{}),onClick:function(t){return a(e,n)},className:"btn-primary-dark rounded-circle btn-primary-dark--sm",type:"button",style:{height:"40px"}})}),(0,b.jsx)("div",{className:"d-flex flex-column justify-content-center h-100 ",children:(0,b.jsx)(U,{style:{height:40,width:"fit-content"}})}),(0,b.jsx)("div",{className:"text-truncate w-100",children:e.name})]})},n)}))]})}),B=t(69973),H=t(53643),Y=t(14417),W=t(88208),G=t(6306),_=t(86434),J=t(7410),K=function(e){var n=e.currentData,t=e.validationSchema,a=e.formBody,r=e.loading,i=void 0!==r&&r,o=e.passProps,s=void 0!==o&&o,l=e.handleSubmit,u=e.isAdvanceMode,p={};return t&&(p.validationSchema=t),(0,b.jsx)(J.J9,(0,d.Z)((0,d.Z)({initialValues:n,enableReinitialize:!0},p),{},{children:function(e){var n=e.values,t=e.validateForm;return(0,b.jsxs)(J.l0,{className:"h-100 w-100",children:[s&&a((0,d.Z)({},e)),!s&&a,(0,b.jsxs)("div",{style:{position:"absolute",bottom:24,right:72},children:[(0,b.jsx)(c.z,{icon:!1,title:"Save",disabled:i,onClick:function(e){e.preventDefault(),t().then((function(e){l&&l(n,!1)}))},className:"btn-primary-dark rounded btn-primary-dark--sm me-2",type:"button"}),!u&&(0,b.jsx)(c.z,{icon:!1,title:"Advance Mode",disabled:i,onClick:function(e){e.preventDefault(),t().then((function(e){l&&l(n,!1,!0)}))},className:"btn-primary-dark rounded btn-primary-dark--sm me-2",type:"button"}),(0,b.jsx)(c.z,{icon:!1,title:"Complete",disabled:i,onClick:function(e){e.preventDefault(),t().then((function(e){l&&l(n,!0)}))},className:"btn-primary-dark rounded btn-primary-dark--sm",type:"button"})]})]})}}))},X=[{apiType:"Text field",formikUiType:"text"},{apiType:"Text Area",formikUiType:"textarea"},{apiType:"Radio button",formikUiType:"radio-button"},{apiType:"Drop Down",formikUiType:"list"},{apiType:"Checkbox",formikUiType:"boolen-input"},{apiType:"Checkbox (multi select)",formikUiType:"boolen-input"}],$={className:"w-100 my-2"},ee=function(e){var n;return(null===(n=X.find((function(n){return n.apiType.toLowerCase()===e.toLowerCase()})))||void 0===n?void 0:n.formikUiType)||"text"},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return null===e||void 0===e?void 0:e.map((function(e){var n=ee(e.type);return(0,d.Z)((0,d.Z)((0,d.Z)((0,d.Z)({},$),{},{name:"".concat(e.answerId),label:e.label},"list"===n?{title:e.label,classes:"mt-3 mb-2"}:{}),"boolen-input"===n?{optionsType:!0}:{}),{},{type:n,options:e.options||[],required:!0})}))},te=function(){return B.Vo((function(e){return B.Ry().shape((0,d.Z)({},{}))}))},ae=function(e){var n=e.currentData,t=e.fields,a=void 0===t?[]:t,r=e.loading,i=e.handleSubmit,o=e.isAdvanceMode;return(0,b.jsx)(K,{currentData:n,formBody:function(){return(0,b.jsx)("div",{className:"py-2",children:a.filter((function(e){var n;return(null===(n=e.testQuestionAndAnswer)||void 0===n?void 0:n.length)>0})).map((function(e,n){return(0,b.jsxs)(H.Z,{children:[(0,b.jsx)(Y.Z,{style:{background:"#7A7480",color:"white",minHeight:"unset",maxHeight:48},expandIcon:(0,b.jsx)(G.Z,{style:{color:"white"}}),id:"".concat(e.categoryName,"-").concat(n),children:e.categoryName}),(0,b.jsx)(W.Z,{children:ne(e.testQuestionAndAnswer||[]).map((function(e){return(0,_.o)(e)}))})]},n)}))})},passProps:!0,validationSchema:te,loading:r,handleSubmit:i,isAdvanceMode:o})},re=function(e){var n=e.answerLoading,t=e.answerSubmitLoading,r=e.data,i=e.runId,o=e.handleSubmit,s=e.isAdvanceMode,l={};if(((null===r||void 0===r?void 0:r.testStrategyCategorys)||[]).forEach((function(e){((null===e||void 0===e?void 0:e.testQuestionAndAnswer)||[]).forEach((function(e){var n=(e.answerText||"").replace(/^\n+/,"")||e.value,t=ee(e.type);if("radio-button"===t||"list"===t){var a=(e.options||[]).find((function(e){return e.value===n}));l[e.answerId]="list"===t?a:a?a.value:function(e,n){return(e.options||[]).length&&n.length?e.options[0].value:void 0}(e,n)}else l[e.answerId]="boolen-input"===t?n.length?n.split(","):void 0:n}))})),n)return(0,b.jsx)("div",{className:"d-flex align-items-center justify-content-center h-100 px-5 py-2",children:(0,b.jsxs)("div",{className:"text-justify",children:["Your documents are currently being analysed under transaction run ID:",i,". Please wait for the analysis to complete, or you can come back later and resume it using your transaction run ID ",i,"."]})});var c=(0,a.Z)((null===r||void 0===r?void 0:r.testStrategyCategorys)||[]);Array.isArray(c)&&c.sort((function(e,n){return e.categoryId-n.categoryId}));var u=[];return c.forEach((function(e){var n=(0,a.Z)((null===e||void 0===e?void 0:e.testQuestionAndAnswer)||[]);Array.isArray(n)&&n.sort((function(e,n){return e.questionId-n.questionId})),u.push((0,d.Z)((0,d.Z)({},e),{},{testQuestionAndAnswer:n.filter((function(e){return"NA"!==e.type}))}))})),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"align-items-center justify-content-center h-100 px-5 py-2",style:{display:t?"flex":"none"},children:(0,b.jsxs)("div",{className:"text-justify",children:[s&&(0,b.jsxs)(b.Fragment,{children:["Your documents are currently being analysed under transaction run ID:",i," for Additional Tailored Segment (Advanced). Please wait for the analysis to complete, or you can come back later and resume it using your transaction run ID ",i,"."]}),!s&&(0,b.jsx)(b.Fragment,{children:"Your Test Strategy creation is in progress. Please wait..."})]})}),(0,b.jsx)("div",{className:"h-100 justify-content-center align-items-center px-5 py-2",style:{display:t?"none":"flex"},children:(0,b.jsx)(ae,{fields:u,currentData:l,loading:n||t,handleSubmit:o,isAdvanceMode:s})})]})},ie=t(52966),oe={className:"w-100 my-2"},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;return null===e||void 0===e?void 0:e.map((function(e){var a,r=ee(e.type),i=(0,ie.qCK)(ie.xHg,(0,ie.UID)((function(e){return e.testQuestionAndAnswer||[]})))(t).find((function(n){return n.answerId!==e.answerId&&n.questionId===e.parentQuestionId})),o=null===(a=n[null===i||void 0===i?void 0:i.answerId])||void 0===a?void 0:a.id,s=e.parentQuestionId===(null===i||void 0===i?void 0:i.questionId);return(0,d.Z)((0,d.Z)((0,d.Z)((0,d.Z)({},oe),{},{name:"".concat(e.answerId),label:e.label},"list"===r?{title:e.label,classes:"mt-3 mb-2"}:{}),"boolen-input"===r?{optionsType:!0}:{}),{},{type:r,options:s?null===e||void 0===e?void 0:e.options.filter((function(e){return e.parentOptionId===o})):e.options||[],required:!0})}))},le=function(){return B.Vo((function(e){return B.Ry().shape((0,d.Z)({},{}))}))},ce=function(e){var n=e.currentData,t=e.fields,a=void 0===t?[]:t,r=e.loading,i=e.handleSubmit,o=e.allCategoryList;return(0,b.jsx)(K,{currentData:n,formBody:function(e){return(0,b.jsx)("div",{className:"py-2",children:a.filter((function(e){var n;return(null===(n=e.testQuestionAndAnswer)||void 0===n?void 0:n.length)>0})).map((function(n,t){return(0,b.jsxs)(H.Z,{children:[(0,b.jsx)(Y.Z,{style:{background:"#7A7480",color:"white",minHeight:"unset",maxHeight:48},expandIcon:(0,b.jsx)(G.Z,{style:{color:"white"}}),id:"".concat(n.categoryName,"-").concat(t),children:n.categoryName}),(0,b.jsx)(W.Z,{children:se(n.testQuestionAndAnswer||[],null===e||void 0===e?void 0:e.values,o).map((function(e){return(0,_.o)(e)}))})]},t)}))})},passProps:!0,validationSchema:le,loading:r,handleSubmit:i,isAdvanceMode:!0})},de=function(e){var n=e.answerLoading,t=e.answerSubmitLoading,r=e.data,i=e.runId,o=e.handleSubmit,s={};if(((null===r||void 0===r?void 0:r.testStrategyCategorys)||[]).filter((function(e){return null===e||void 0===e?void 0:e.advaceAiCategory})).forEach((function(e){((null===e||void 0===e?void 0:e.testQuestionAndAnswer)||[]).forEach((function(e){var n=(e.answerText||"").replace(/^\n+/,"")||e.value,t=ee(e.type);if("radio-button"===t||"list"===t){var a=(e.options||[]).find((function(e){return e.value===n}));s[e.answerId]="list"===t?a:a?a.value:function(e,n){return(e.options||[]).length&&n.length?e.options[0].value:void 0}(e,n)}else s[e.answerId]="boolen-input"===t?n.length?n.split(","):void 0:n}))})),n)return(0,b.jsx)("div",{className:"d-flex align-items-center justify-content-center h-100 px-5 py-2",children:(0,b.jsxs)("div",{className:"text-justify",children:["Your documents are currently being analysed under transaction run ID:",i,". Please wait for the analysis to complete, or you can come back later and resume it using your transaction run ID ",i,"."]})});var l=(0,a.Z)((null===r||void 0===r?void 0:r.testStrategyCategorys)||[]);Array.isArray(l)&&l.sort((function(e,n){return e.categoryId-n.categoryId}));var c=[];return l.filter((function(e){return null===e||void 0===e?void 0:e.advaceAiCategory})).forEach((function(e){var n=(0,a.Z)((null===e||void 0===e?void 0:e.testQuestionAndAnswer)||[]);Array.isArray(n)&&n.sort((function(e,n){return e.questionId-n.questionId})),c.push((0,d.Z)((0,d.Z)({},e),{},{testQuestionAndAnswer:n.filter((function(e){return"NA"!==e.type}))}))})),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"align-items-center justify-content-center h-100 px-5 py-2",style:{display:t?"flex":"none"},children:(0,b.jsx)("div",{className:"text-justify",children:"Your Additional Tailored Segment (Advanced) creation is in progress. Please wait..."})}),(0,b.jsx)("div",{className:"h-100 justify-content-center align-items-center px-5 py-2",style:{display:t?"none":"flex"},children:(0,b.jsx)(ce,{fields:c,currentData:s,loading:n||t,handleSubmit:o,allCategoryList:l})})]})},ue=t(91486),pe=t(35381),fe=t(45987),me=t(74165),ve=t(64276),he=t(49933),ge=t(61742),ye=t(36849),xe="generate/test/strategy/document/stage",be={postFileLists:function(e){return ye.be.post("".concat(xe,"/1"),e)},getAnswers:function(e){return ye.be.post("".concat(xe,"/2"),e)},postAnswers:function(e){return ye.be.post("".concat(xe,"/3"),e)}},we=["callAdvanceModeAPI"],je=(0,me.Z)().mark(Ae),Ze=(0,me.Z)().mark(ke),Ie=(0,me.Z)().mark(Ce),Se=(0,me.Z)().mark(Ne);function Ae(e){var n,t,a;return(0,me.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n=new FormData,(e.payload.documents||[]).forEach((function(e){n.append("documents",e)})),n.append("projectId",e.payload.projectId||""),r.next=6,(0,ve.RE)(be.postFileLists,n);case 6:return t=r.sent,r.next=9,(0,ve.gz)(Te.postFilesSuccess(t.data.data.length&&t.data.data[0]||{}));case 9:r.next=17;break;case 11:return r.prev=11,r.t0=r.catch(0),r.next=15,(0,ve.gz)(Te.postFilesError());case 15:a=(0,ge.Ev)(r.t0),he.a.error(a);case 17:case"end":return r.stop()}}),je,null,[[0,11]])}function ke(e){var n,t;return(0,me.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,ve.RE)(be.getAnswers,e.payload);case 3:return n=a.sent,a.next=6,(0,ve.gz)(Te.onQuestionAnswerListFetchSuccess(n.data.data.length&&n.data.data[0]||{}));case 6:a.next=14;break;case 8:return a.prev=8,a.t0=a.catch(0),a.next=12,(0,ve.gz)(Te.onQuestionAnswerListFetchError());case 12:t=(0,ge.Ev)(a.t0),he.a.error(t);case 14:case"end":return a.stop()}}),Ze,null,[[0,8]])}function Ce(e){var n,t,a,r,i,o;return(0,me.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return n=e.payload,t=n.callAdvanceModeAPI,a=void 0!==t&&t,r=(0,fe.Z)(n,we),s.prev=1,s.next=4,(0,ve.RE)(be.postAnswers,r);case 4:if(i=s.sent,!a){s.next=10;break}return s.next=8,(0,ve.gz)(Te.doQuestionAnswerListFetch({runId:r.runId,advanceReport:!0}));case 8:s.next=13;break;case 10:return s.next=12,(0,ve.gz)(Te.postAnswersSuccess(i.data.data.length&&i.data.data[0]||{}));case 12:he.a.success("Test Strategy Created");case 13:s.next=21;break;case 15:return s.prev=15,s.t0=s.catch(1),s.next=19,(0,ve.gz)(Te.postAnswersError());case 19:o=(0,ge.Ev)(s.t0),he.a.error(o);case 21:case"end":return s.stop()}}),Ie,null,[[1,15]])}function Ne(){return(0,me.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ve.Fm)(Te.postFiles.type,Ae);case 2:return e.next=4,(0,ve.Fm)(Te.doQuestionAnswerListFetch.type,ke);case 4:return e.next=6,(0,ve.Fm)(Te.postAnswers.type,Ce);case 6:case"end":return e.stop()}}),Se)}var Le={data:{},loading:!1,error:"",refreshDataCounter:0,uploadLoading:!1,uploadSuccess:!1,answerLoading:!1,answerSubmitLoading:!1,answerSubmitSuccess:!1,generateDoc:!1,callAdvanceModeAPI:!1},Pe=(0,ue.o)({name:"testStrategy",initialState:Le,reducers:{postFiles:function(e,n){e.uploadLoading=!0,e.uploadSuccess=!1},postFilesSuccess:function(e,n){e.uploadLoading=!1,e.uploadSuccess=!0,e.data=n.payload},postFilesError:function(e){e.uploadLoading=!1,e.uploadSuccess=!1},doQuestionAnswerListFetch:function(e,n){e.data={},e.answerLoading=!0},onQuestionAnswerListFetchSuccess:function(e,n){e.data=n.payload,e.answerLoading=!1,e.answerSubmitLoading=!1},onQuestionAnswerListFetchError:function(e){e.answerLoading=!1},postAnswers:function(e,n){e.answerSubmitLoading=!0,e.answerSubmitSuccess=!1,e.generateDoc=n.payload.genrateDoc,e.callAdvanceModeAPI=n.payload.callAdvanceModeAPI},postAnswersSuccess:function(e,n){e.answerSubmitLoading=!1,e.answerSubmitSuccess=!0,e.callAdvanceModeAPI=!1},postAnswersError:function(e){e.answerSubmitLoading=!1,e.answerSubmitSuccess=!1}}}),Te=Pe.actions,Fe=function(){return(0,pe.v)({key:Pe.name,reducer:Pe.reducer}),(0,pe.h)({key:Pe.name,saga:Ne}),{actions:Pe.actions}},Ee=(0,t(76747).P1)([function(e){return e.testStrategy||Le}],(function(e){return e})),De=t(38392),Oe={firstPage:1,secondPage:2,thirdPage:3,fourthPage:4};function Me(e){var n=(0,s.I0)(),t=(0,l.s0)(),i=Fe().actions,d=(0,s.v9)(Ee),u=d.uploadLoading,f=d.uploadSuccess,m=d.answerLoading,v=d.answerSubmitLoading,h=d.answerSubmitSuccess,g=d.data,y=d.generateDoc,x=d.callAdvanceModeAPI,w=(0,De.D)(u)||!1,j=(0,De.D)(v)||!1,Z=(0,De.D)(m)||!1,S=o.useState(0),C=(0,r.Z)(S,2),N=C[0],L=C[1],T=(0,De.D)(N),F=o.useState(1),E=(0,r.Z)(F,2),D=E[0],O=E[1],M=o.useState({}),Q=(0,r.Z)(M,2),z=Q[0],R=Q[1],V=o.useState(),U=(0,r.Z)(V,2),B=U[0],H=U[1],Y=o.useState([]),W=(0,r.Z)(Y,2),G=W[0],_=W[1],J=o.useState(),K=(0,r.Z)(J,2),X=K[0],$=K[1],ee=o.useState(!1),ne=(0,r.Z)(ee,2),te=ne[0],ae=ne[1];o.useEffect((function(){w&&!u&&f&&L((function(e){return e+1}))}),[u,w,f]),o.useEffect((function(){j&&!v&&h&&y&&t("/app/dashboard")}),[v,j,h,y,t]),o.useEffect((function(){Z&&!m&&x&&L((function(e){return e+1}))}),[m,Z,x]),o.useEffect((function(){N!==T&&(1===D&&2===N||2===D&&1===N)&&n(i.doQuestionAnswerListFetch({runId:X}))}),[i,n,N,T,D,X]),o.useEffect((function(){null!==g&&void 0!==g&&g.runId&&$(null===g||void 0===g?void 0:g.runId)}),[g]);var ie=[{name:"Start",id:1},{name:"Upload Files",id:2},{name:"Input Data Review",id:3},{name:"Additional Tailored Segment (Advanced)",id:4}].filter((function(e,n){return(2!==D||e.id!==Oe.secondPage)&&!(!te&&e.id===Oe.fourthPage)}));return(0,b.jsxs)(Qe,{children:[(0,b.jsx)("div",{className:"d-flex justify-content-between align-items-center",children:(0,b.jsx)(A.a,{title:"Generate Test Strategy Document"})}),(0,b.jsxs)(k.o,{className:"position-relative d-flex p-4 flex-column mt-4",style:{height:"calc(100% - 1.5rem)"},children:[(0,b.jsx)(I,{steps:ie,activeStep:N}),(0,b.jsxs)("div",{className:"h-100",style:{overflowY:"auto",overflowX:"hidden"},children:[(0,b.jsx)("div",{className:"".concat(0===N?"":"d-none"),children:(0,b.jsx)(P,{viewId:D,setViewId:function(e){O(e),$(void 0)},currentProject:z,onProjectChange:function(e){R(e||{})},portfolioId:B,runId:X,onChange:function(e){e&&$(e?e.runId:void 0)},onPortfolioIdChange:function(e){H(e?e.portfolioId:void 0)}})}),1===D&&1===N&&(0,b.jsx)(q,{files:G,handleFilesChange:function(e){var n=e.target.files;_((function(e){var t=e.map((function(e){return e.name})),r=(0,a.Z)(n).filter((function(e){return!t.includes(e.name)}));return[].concat((0,a.Z)(e),(0,a.Z)(r))}))},handleClearFile:function(e,n){_((function(e){return e.filter((function(e,t){return t!==n}))}))},uploadLoading:u}),(1===D&&2===N||2===D&&1===N)&&(0,b.jsx)(re,{answerLoading:m,answerSubmitLoading:v,isAdvanceMode:te,handleSubmit:function(e,t,a){a&&ae(!0);var r=[];Object.keys(e).forEach((function(n){var t=Array.isArray(e[n])?e[n].join(","):"object"===typeof e[n]&&null!==e[n]?e[n].value:e[n];r.push({answerId:+n,answerText:t||""})}));var o={runId:X,genrateDoc:t,testQuestionAndAnswer:r,callAdvanceModeAPI:a};n(i.postAnswers(o))},data:g,runId:X}),(1===D&&3===N||2===D&&2===N)&&(0,b.jsx)(de,{answerLoading:m,answerSubmitLoading:v,handleSubmit:function(e,t){var a=[];Object.keys(e).forEach((function(n){var t=Array.isArray(e[n])?e[n].join(","):"object"===typeof e[n]&&null!==e[n]?e[n].value:e[n];a.push({answerId:+n,answerText:t||""})}));var r={runId:X,genrateDoc:t,advanceReport:!0,testQuestionAndAnswer:a};n(i.postAnswers(r))},data:g,runId:X})]}),(0,b.jsx)("div",{children:(0,b.jsxs)(p.Z,{sx:{display:"flex",flexDirection:"row",pt:2,width:"calc(100% - 3rem)"},children:[(0,b.jsx)(c.z,{icon:!1,title:"Back",disabled:0===N||1===D&&2===N||1===D&&3===N||2===D&&1===N||2===D&&2===N||u||m,onClick:function(){L((function(e){return e-1}))},className:"btn-primary-dark rounded btn-primary-dark--sm",style:{background:"#1c242c"},type:"button"}),(0,b.jsx)(p.Z,{sx:{flex:"1 1 auto"}}),(0,b.jsx)("div",{children:(0,b.jsx)(c.z,{icon:!1,title:N===ie.length-1?"Complete":"Next",disabled:0===N?(null===z||void 0===z||!z.projectId||2===D)&&!X:1===D&&1===N?!(null!==G&&void 0!==G&&G.length)||u:m||v,onClick:function(){0===N?L((function(e){return e+1})):1===D&&1===N&&n(i.postFiles({documents:G,projectId:null===z||void 0===z?void 0:z.projectId}))},className:"btn-primary-dark rounded btn-primary-dark--sm ".concat(!(1===D&&2===N||2===D&&1===N||N===ie.length-1)||m||v?"":"d-none"),type:"button"})})]})})]})]})}var Qe=i.ZP.div.withConfig({componentId:"sc-yy6ji5-0"})(["display:flex;flex-direction:column;height:calc(100% - 100px);"])}}]);