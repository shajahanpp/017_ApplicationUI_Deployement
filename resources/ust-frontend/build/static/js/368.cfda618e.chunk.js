"use strict";(self.webpackChunkust_web=self.webpackChunkust_web||[]).push([[368],{55585:function(t,e,o){o.r(e),o.d(e,{Portfolio:function(){return ut}});var r=o(74165),n=o(15861),a=o(1413),s=o(29439),i=o(53115),c=o(47313),d=o(56352),u=o(83069),l=o(68745),f=o(2419),p=o(68598),h=o(66100),P=o(37784),m=o(58510),v=o(13611),L=o(62444),g=o(99639),x=o(50533),F=o(76747),j=o(91486),D=o(35381),y=o(49933),w=o(64276),E=o(61742),Z=o(36849),b="portfolio",k={fetchPortfolioLists:function(t){return Z.be.get(b,{params:t.data.payload})}},U={postPortfolioLists:function(t){return Z.be.post(b,t.data.payload)}},N={putPortfolioLists:function(t){return Z.be.put(b,t.data.payload)}},C={deletePortfolioLists:function(t){return Z.be.delete("".concat(b,"?portfolioId=").concat(t.data.payload))}},A=(0,r.Z)().mark(G),z=(0,r.Z)().mark(M),R=(0,r.Z)().mark(K),I=(0,r.Z)().mark(_),S=(0,r.Z)().mark(T);function G(t){var e,o;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,w.RE)(k.fetchPortfolioLists,{data:t});case 3:return e=r.sent,r.next=6,(0,w.gz)(H.getPortfoliosListFetchsuccess(e.data));case 6:r.next=14;break;case 8:return r.prev=8,r.t0=r.catch(0),r.next=12,(0,w.gz)(H.getPortfoliosListFetchError());case 12:o=(0,E.Ev)(r.t0),y.a.error(o);case 14:case"end":return r.stop()}}),A,null,[[0,8]])}function M(t){var e,o;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,w.RE)(U.postPortfolioLists,{data:t});case 3:return e=r.sent,r.next=6,(0,w.gz)(H.postPortfolioListFetchsuccess(e.data));case 6:y.a.success("Portfolio Added"),r.next=15;break;case 9:return r.prev=9,r.t0=r.catch(0),r.next=13,(0,w.gz)(H.postPortfolioListFetchError());case 13:o=(0,E.Ev)(r.t0),y.a.error(o);case 15:case"end":return r.stop()}}),z,null,[[0,9]])}function K(t){var e,o;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,w.RE)(N.putPortfolioLists,{data:t});case 3:return e=r.sent,r.next=6,(0,w.gz)(H.putPortfolioListFetchsuccess(e.data));case 6:y.a.success("Portfolio Updated"),r.next=15;break;case 9:return r.prev=9,r.t0=r.catch(0),r.next=13,(0,w.gz)(H.putPortfolioListFetchError());case 13:o=(0,E.Ev)(r.t0),y.a.error(o);case 15:case"end":return r.stop()}}),R,null,[[0,9]])}function _(t){var e,o;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,w.RE)(C.deletePortfolioLists,{data:t});case 3:return e=r.sent,r.next=6,(0,w.gz)(H.putPortfolioListFetchsuccess(e.data));case 6:y.a.success("Portfolio Deleted"),r.next=15;break;case 9:return r.prev=9,r.t0=r.catch(0),r.next=13,(0,w.gz)(H.putPortfolioListFetchError());case 13:o=(0,E.Ev)(r.t0),y.a.error(o);case 15:case"end":return r.stop()}}),I,null,[[0,9]])}function T(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,w.Fm)(H.doGetPortfoliosListsFetch.type,G);case 2:return t.next=4,(0,w.Fm)(H.doPostPortfolioListsFetch.type,M);case 4:return t.next=6,(0,w.Fm)(H.doPutPortfolioListsFetch.type,K);case 6:return t.next=8,(0,w.Fm)(H.doDeletePortfolioListsFetch.type,_);case 8:case"end":return t.stop()}}),S)}var q={data:{},loading:!1,addUpdateDeleteLoading:!1,refreshPortfolioDataCounter:0},B=(0,j.o)({name:"portfolio",initialState:q,reducers:{doGetPortfoliosListsFetch:function(t,e){t.data={},t.loading=!0},getPortfoliosListFetchsuccess:function(t,e){t.data=e.payload,t.loading=!1},getPortfoliosListFetchError:function(t){t.data={},t.loading=!1},clearGetPortfoliosListResponse:function(t){t.data={},t.loading=!1},doPostPortfolioListsFetch:function(t,e){t.addUpdateDeleteLoading=!0},postPortfolioListFetchsuccess:function(t,e){t.addUpdateDeleteLoading=!1,t.refreshPortfolioDataCounter+=1},postPortfolioListFetchError:function(t){t.addUpdateDeleteLoading=!1,t.refreshPortfolioDataCounter+=1},doPutPortfolioListsFetch:function(t,e){t.addUpdateDeleteLoading=!0},putPortfolioListFetchsuccess:function(t,e){t.addUpdateDeleteLoading=!1,t.refreshPortfolioDataCounter+=1},putPortfolioListFetchError:function(t){t.addUpdateDeleteLoading=!1,t.refreshPortfolioDataCounter+=1},doDeletePortfolioListsFetch:function(t,e){t.addUpdateDeleteLoading=!0},deletePortfolioListFetchsuccess:function(t,e){t.addUpdateDeleteLoading=!1,t.refreshPortfolioDataCounter+=1},deletePortfolioListFetchError:function(t){t.addUpdateDeleteLoading=!1,t.refreshPortfolioDataCounter+=1}}}),H=B.actions,V=function(){return(0,D.v)({key:B.name,reducer:B.reducer}),(0,D.h)({key:B.name,saga:T}),{actions:B.actions}},J=(0,F.P1)([function(t){return t.portfolio||q}],(function(t){return t})),O=(0,F.P1)([J],(function(t){return t.data})),W=(0,F.P1)([J],(function(t){return t.loading||!1})),X=(0,F.P1)([J],(function(t){return t.addUpdateDeleteLoading||!1})),Q=((0,F.P1)([J],(function(t){return t.refreshPortfolioDataCounter||0})),o(9138)),Y=o(62759),$=o(38392),tt=o(69973),et=o(86434),ot=o(11777),rt=o(84911),nt=o(46417),at={className:"w-100 my-2"},st=function(t){return{portfolioName:t.portfolioName,portfolioDesc:t.portfolioDesc}},it=function(){return tt.Vo((function(t){return tt.Ry().shape({portfolioName:tt.Z_().required("Portfolio Name is required")})}))},ct=function(t){var e=t.open,o=t.handleFormModalClose,r=t.addUpdateDeleteLoading,n=t.handleSubmit,s=t.currentData;return(0,nt.jsx)(ot.u,{currentData:s,formModalOpen:e,formTitle:(null===s||void 0===s?void 0:s.currentFormMode)===rt.A9?"Add Portfolio":"Edit Portfolio",handleFormModalClose:o,formSaveButtonType:"submit",loading:r||!1,formBody:function(){return[(0,a.Z)((0,a.Z)({},at),{},{name:"portfolioName",label:"Portfolio Name",type:"text",placeholder:"Please Enter Portfolio Name",required:!0}),(0,a.Z)((0,a.Z)({},at),{},{name:"portfolioDesc",label:"Portfolio Description",type:"text",placeholder:"Please Enter Portfolio Description"})].map((function(t){return(0,et.o)(t)}))},passProps:!0,handleSubmit:n,validationSchema:it})},dt=o(69109);function ut(t){var e,o=t.isAdmin,i=void 0!==o&&o,F=(0,d.I0)(),j=V().actions,D=(0,Q._N)().actions,y=(0,d.v9)(O),w=(0,d.v9)(W),E=(0,d.v9)(X),Z=(0,$.D)(E),b=(0,d.v9)(Y.yA),k=c.useState({offset:0,limit:10,searchKeyword:""}),U=(0,s.Z)(k,2),N=U[0],C=U[1],A=c.useState(!1),z=(0,s.Z)(A,2),R=z[0],I=z[1],S=c.useState(!1),G=(0,s.Z)(S,2),M=G[0],K=G[1],_=c.useState(),T=(0,s.Z)(_,2),q=T[0],B=T[1],H=c.useCallback((function(t){C((function(e){return(0,a.Z)((0,a.Z)({},e),{},{offset:t-1,limit:10})}))}),[]);c.useEffect((function(){F(j.doGetPortfoliosListsFetch(N))}),[F,j,N]),c.useEffect((function(){return function(){F(j.clearGetPortfoliosListResponse())}}),[F,j]),c.useEffect((function(){return null!==q&&void 0!==q&&q.portfolioId&&F(D.doGetProjectListsFetch({offset:0,limit:1,portfolioId:null===q||void 0===q?void 0:q.portfolioId})),function(){F(D.clearGetProjectListResponse())}}),[null===q||void 0===q?void 0:q.portfolioId,F,D,M]),c.useEffect((function(){Z&&!E&&C((function(t){return(0,a.Z)((0,a.Z)({},t),{},{offset:0,limit:10})})),E||(I(!1),B(void 0),K(!1))}),[E,H,Z]);var J=function(){var t=(0,n.Z)((0,r.Z)().mark((function t(e){var o,n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=e.currentFormMode===rt.A9,n=st(e),F(o?j.doPostPortfolioListsFetch((0,a.Z)({},n)):j.doPutPortfolioListsFetch((0,a.Z)({portfolioId:e.portfolioId},n)));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),tt=[{field:"portfolioName",headerName:"Name",width:250},{field:"portfolioDesc",headerName:"Description",width:300},{field:"action",headerName:"",width:130,sticky:!0,cellClassName:"custom-cell-sticky custom-sticky-right-zero",headerClassName:"",renderCell:function(t){var e=t.row;return(0,nt.jsx)(nt.Fragment,{children:(0,nt.jsxs)("div",{className:"d-flex align-items-center w-100 ",children:[i&&(0,nt.jsx)("div",{className:"cursor-pointer me-2",children:(0,nt.jsx)(L.r,{onClick:function(){return function(t){I(!0),B((0,a.Z)((0,a.Z)({},t),{},{currentFormMode:rt.Gt}))}(e)}})}),i&&(0,nt.jsx)("div",{className:"cursor-pointer",children:(0,nt.jsx)(g.r,{onClick:function(){return function(t){K(!0),B(t)}(e)}})})]})})}}];return(0,nt.jsxs)(lt,{className:"pb-4",children:[(0,nt.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,nt.jsx)(u.a,{title:"Portfolio"}),(0,nt.jsx)(h.z,{icon:!1,title:"Add Portfolio",onClick:function(){I(!0),B({currentFormMode:rt.A9})},className:"btn-primary-dark btn-primary-dark--sm",disabled:!1,type:"button"})]}),(0,nt.jsx)(p.Z,{children:(0,nt.jsx)("div",{className:"d-flex align-items-end",children:(0,nt.jsx)("div",{children:(0,nt.jsx)(m.Z,{label:"",value:(null===N||void 0===N?void 0:N.searchKeyword)||"",setValue:function(t){C((0,a.Z)((0,a.Z)({},N),{},{offset:0,searchKeyword:t}))},type:"text",className:"w-100 custom-rate-input",inputProps:{min:1},startAdornment:(0,nt.jsx)(x.r,{className:"m-1",style:{height:20,width:20}}),disabled:!1,endAdornment:(null===N||void 0===N||null===(e=N.searchKeyword)||void 0===e?void 0:e.length)>0?(0,nt.jsx)(v.r,{className:"m-1",onClick:function(){return C((0,a.Z)((0,a.Z)({},N),{},{searchKeyword:""}))}}):void 0})})})}),(0,nt.jsxs)(f.o,{className:"d-flex flex-column h-100 mt-4 mb-5 overflow-hidden",children:[(0,nt.jsx)(l.X,{title:""}),(0,nt.jsx)(P.Z,{getId:function(t){return t.portfolioId},emptyMsg:"No Portfolios Found",page:N.offset+1,setPageState:H,checkBoxes:!1,columns:tt,recordCount:(null===y||void 0===y?void 0:y.recordCount)||0,rows:(null===y||void 0===y?void 0:y.data)||[],onRowsSelectionHandler:function(t){return t},loading:w,rowHeight:"auto"})]}),(0,nt.jsx)(ct,{open:R,currentData:q,handleFormModalClose:function(){I(!1),B(void 0)},addUpdateDeleteLoading:E,handleSubmit:J}),(0,nt.jsx)(dt.s,{show:M,handleConfirm:function(){F(j.doDeletePortfolioListsFetch(null===q||void 0===q?void 0:q.portfolioId))},onHide:function(){K(!1),B(void 0)},submitLoading:E,title:"Confirm Delete",btnTitle:"Delete",message:(((null===b||void 0===b?void 0:b.recordCount)||0)>0?"This will delete all the ".concat(null===b||void 0===b?void 0:b.recordCount," projects assigned to this portfolio."):"")+"Are you sure you want to delete this Portfolio?"})]})}var lt=i.ZP.div.withConfig({componentId:"sc-gp749v-0"})(["display:flex;flex-direction:column;height:100%;"])},9138:function(t,e,o){o.d(e,{E3:function(){return w},l6:function(){return Z},_N:function(){return b}});var r=o(91486),n=o(35381),a=o(74165),s=o(64276),i=o(61742),c=o(49933),d=o(36849),u="project",l={fetchProjectLists:function(t){return d.be.get(u,{params:t.data.payload})}},f={postProjectLists:function(t){return d.be.post(u,t.data.payload)}},p={putProjectLists:function(t){return d.be.put(u,t.data.payload)}},h={deleteProjectLists:function(t){return d.be.delete("".concat(u,"?projectId=").concat(t.data.payload))}},P=(0,a.Z)().mark(x),m=(0,a.Z)().mark(F),v=(0,a.Z)().mark(j),L=(0,a.Z)().mark(D),g=(0,a.Z)().mark(y);function x(t){var e,o;return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,s.RE)(l.fetchProjectLists,{data:t});case 3:return e=r.sent,r.next=6,(0,s.gz)(Z.getProjectListFetchsuccess(e.data));case 6:r.next=14;break;case 8:return r.prev=8,r.t0=r.catch(0),r.next=12,(0,s.gz)(Z.getProjectListFetchError());case 12:o=(0,i.Ev)(r.t0),c.a.error(o);case 14:case"end":return r.stop()}}),P,null,[[0,8]])}function F(t){var e,o;return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,s.RE)(f.postProjectLists,{data:t});case 3:return e=r.sent,r.next=6,(0,s.gz)(Z.postProjectListFetchsuccess(e.data));case 6:c.a.success("Project Added"),r.next=15;break;case 9:return r.prev=9,r.t0=r.catch(0),r.next=13,(0,s.gz)(Z.postProjectListFetchError());case 13:o=(0,i.Ev)(r.t0),c.a.error(o);case 15:case"end":return r.stop()}}),m,null,[[0,9]])}function j(t){var e,o;return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,s.RE)(p.putProjectLists,{data:t});case 3:return e=r.sent,r.next=6,(0,s.gz)(Z.putProjectListFetchsuccess(e.data));case 6:c.a.success("Project Updated"),r.next=15;break;case 9:return r.prev=9,r.t0=r.catch(0),r.next=13,(0,s.gz)(Z.putProjectListFetchError());case 13:o=(0,i.Ev)(r.t0),c.a.error(o);case 15:case"end":return r.stop()}}),v,null,[[0,9]])}function D(t){var e,o;return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,s.RE)(h.deleteProjectLists,{data:t});case 3:return e=r.sent,r.next=6,(0,s.gz)(Z.putProjectListFetchsuccess(e.data));case 6:c.a.success("Project Deleted"),r.next=15;break;case 9:return r.prev=9,r.t0=r.catch(0),r.next=13,(0,s.gz)(Z.putProjectListFetchError());case 13:o=(0,i.Ev)(r.t0),c.a.error(o);case 15:case"end":return r.stop()}}),L,null,[[0,9]])}function y(){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.Fm)(Z.doGetProjectListsFetch.type,x);case 2:return t.next=4,(0,s.Fm)(Z.doPostProjectListsFetch.type,F);case 4:return t.next=6,(0,s.Fm)(Z.doPutProjectListsFetch.type,j);case 6:return t.next=8,(0,s.Fm)(Z.doDeleteProjectListsFetch.type,D);case 8:case"end":return t.stop()}}),g)}var w={loading:!0,data:{},addUpdateDeleteLoading:!1,isFormAddUpdateError:!1},E=(0,r.o)({name:"projects",initialState:w,reducers:{doGetProjectListsFetch:function(t,e){t.data={},t.loading=!0},getProjectListFetchsuccess:function(t,e){t.data=e.payload,t.loading=!1},getProjectListFetchError:function(t){t.data={},t.loading=!1},clearGetProjectListResponse:function(t){t.data={},t.loading=!1},doPostProjectListsFetch:function(t,e){t.addUpdateDeleteLoading=!0},postProjectListFetchsuccess:function(t,e){t.addUpdateDeleteLoading=!1,t.isFormAddUpdateError=!1},postProjectListFetchError:function(t){t.addUpdateDeleteLoading=!1,t.isFormAddUpdateError=!0},doPutProjectListsFetch:function(t,e){t.addUpdateDeleteLoading=!0},putProjectListFetchsuccess:function(t,e){t.addUpdateDeleteLoading=!1,t.isFormAddUpdateError=!1},putProjectListFetchError:function(t){t.addUpdateDeleteLoading=!1,t.isFormAddUpdateError=!0},doDeleteProjectListsFetch:function(t,e){t.addUpdateDeleteLoading=!0},deleteProjectListFetchsuccess:function(t,e){t.addUpdateDeleteLoading=!1,t.isFormAddUpdateError=!1},deleteProjectListFetchError:function(t){t.addUpdateDeleteLoading=!1,t.isFormAddUpdateError=!0}}}),Z=E.actions,b=function(){return(0,n.v)({key:E.name,reducer:E.reducer}),(0,n.h)({key:E.name,saga:y}),{actions:E.actions}}},62759:function(t,e,o){o.d(e,{JN:function(){return c},yA:function(){return s},yW:function(){return i}});var r=o(76747),n=o(9138),a=(0,r.P1)([function(t){return t.projects||n.E3}],(function(t){return t})),s=(0,r.P1)([a],(function(t){return t.data})),i=(0,r.P1)([a],(function(t){return t.loading||!1})),c=(0,r.P1)([a],(function(t){return t.addUpdateDeleteLoading||!1}))}}]);